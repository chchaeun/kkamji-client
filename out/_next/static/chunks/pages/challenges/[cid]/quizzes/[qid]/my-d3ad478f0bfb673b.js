(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{5383:function(n,e,i){"use strict";i.r(e),i.d(e,{default:function(){return X}});var t=i(3974),o=i(1670),r=i(9953),c=i(2309),l=i(1335),s=i(4048),a=i(8306),d=i.n(a),u=i(1013),p=i(1193),f=i(4265),x=i(4609),h=i(8647),g=i(1874);function b(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.push.apply(i,t)}return i}function w(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?b(Object(i),!0).forEach((function(e){(0,l.Z)(n,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}))}return n}var m=function(n){var e,i,t,o,c,l=n.quizId,a=new p.QueryClient,b=(0,r.useState)(!1),m=b[0],Z=b[1],B=(0,r.useState)(!1),M=B[0],A=B[1],O=(0,r.useState)(!1),Q=O[0],E=O[1],S=(0,f.cI)(),D=S.register,R=S.control,F=S.handleSubmit,T=S.reset,H=S.formState.errors,J=S.watch,V=S.resetField,X=J("answer"),Y=J("explanation"),G=function(n){var e=function(){confirm("\uc791\uc131\ud55c \ub0b4\uc6a9\uc774 \uc0ac\ub77c\uc9d1\ub2c8\ub2e4. \ucde8\uc18c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&V(n)};switch(n){case"answer":X?e():V(n),Z(!1);break;case"explanation":Y?e():V(n),A(!1)}},K=function(n){switch(n){case"answer":Z(!0);break;case"explanation":A(!0)}},L=(0,f.Dq)({control:R,name:"rubric"}),U=L.fields,W=L.append,$=L.remove,nn=(0,h.BB)({quizId:l,successHandler:function(n){T({answer:n.quizAnswer,explanation:n.quizExplanation,rubric:n.quizRubric})}}),en=nn.data,tn=(nn.error,(0,p.useMutation)(function(){var n=(0,s.Z)(d().mark((function n(e){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x._.patch("/quizzes/".concat(l),e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),{onSuccess:function(){a.invalidateQueries(["myQuizDetail",l]),window.location.reload()},onMutate:function(){Z(!1),A(!1),E(!1)},retryDelay:3e3})),on=tn.mutate;return(0,g.jsx)(y,{children:(0,g.jsxs)(v,{onSubmit:F((function(n){var e=n.answer,i=n.explanation,t=n.rubric,o={quizAnswer:e,quizExplanation:i,quizRubric:JSON.stringify(t)};on(o)})),children:[(null===en||void 0===en?void 0:en.quizAnswer)&&(0,g.jsxs)(_,{children:[(0,g.jsx)(j,{children:"\uc815\ub2f5"}),(0,g.jsx)(k,w(w({},D("answer",{required:!0})),{},{defaultValue:en.quizAnswer.replaceAll("\t","\xa0 \xa0 \xa0 \xa0").replaceAll("\\t","\xa0 \xa0 \xa0 \xa0"),rows:Math.max(en.quizAnswer.split("\n").length+1,Math.ceil(en.quizAnswer.length/60)),onFocus:function(){return K("answer")}})),m&&(0,g.jsxs)(q,{children:[(0,g.jsx)("button",{type:"button",onClick:function(){return G("answer")},children:"\ucde8\uc18c"}),(0,g.jsx)("button",{type:"submit",children:"\uc218\uc815"})]})]}),(null===en||void 0===en?void 0:en.quizExplanation)&&(0,g.jsxs)(_,{children:[(0,g.jsx)(j,{children:"\ud574\uc124"}),(0,g.jsx)(k,w(w({},D("explanation",{required:!0})),{},{defaultValue:en.quizExplanation.replaceAll("\t","\xa0 \xa0 \xa0 \xa0").replaceAll("\\t","\xa0 \xa0 \xa0 \xa0"),rows:Math.max(en.quizExplanation.split("\n").length+1,Math.ceil(en.quizExplanation.length/60)),onFocus:function(){return K("explanation")}})),M&&(0,g.jsxs)(q,{children:[(0,g.jsx)("button",{type:"button",onClick:function(){return G("explanation")},children:"\ucde8\uc18c"}),(0,g.jsx)("button",{type:"submit",children:"\uc218\uc815"})]})]}),(null===en||void 0===en?void 0:en.quizRubric)&&(0,g.jsxs)(_,{children:[(0,g.jsxs)(C,{children:[(0,g.jsx)(j,{children:"\ucc44\uc810 \uae30\uc900"}),!Q&&(0,g.jsx)("button",{type:"button",onClick:function(){E(!0)},children:"\uc218\uc815"})]}),!Q&&(null===en||void 0===en||null===(e=en.quizRubric)||void 0===e?void 0:e.map((function(n,e){return(0,g.jsxs)(z,{children:[(0,g.jsx)(I,{children:n.content}),(0,g.jsxs)(P,{children:[n.score,"\uc810"]})]},e)}))),Q&&(0,g.jsxs)("div",{children:[U.map((function(n,e){return(0,g.jsxs)(N,{children:[(0,g.jsx)("input",w({},D("rubric.".concat(e,".content"),{required:"\ucc44\uc810 \uae30\uc900\uc740 \ud544\uc218 \uc785\ub825\uac12\uc785\ub2c8\ub2e4."}))),(0,g.jsx)("input",w({},D("rubric.".concat(e,".score"),{required:"\uc810\uc218\ub294 \ud544\uc218 \uc785\ub825\uac12\uc785\ub2c8\ub2e4."}))),(0,g.jsx)("button",{type:"button",onClick:function(){return $(e)},children:(0,g.jsx)(u.JO,{icon:"akar-icons:circle-minus-fill",color:"#6366f1"})})]},n.id)})),(0,g.jsx)("em",{className:"block py-3",children:H.rubric&&(null===(i=H.rubric[0])||void 0===i||null===(t=i.score)||void 0===t?void 0:t.message)}),(0,g.jsx)("em",{className:"block",children:H.rubric&&(null===(o=H.rubric[0])||void 0===o||null===(c=o.content)||void 0===c?void 0:c.message)}),(0,g.jsx)("div",{className:"flex justify-center w-full p-5 text-3xl sm:pt-0",children:(0,g.jsx)("button",{type:"button",onClick:function(){W({})},children:(0,g.jsx)(u.JO,{icon:"akar-icons:circle-plus-fill",color:"#6366f1",fontSize:26})})})]}),Q&&(0,g.jsxs)(q,{children:[(0,g.jsx)("button",{type:"button",onClick:function(){E(!1)},children:"\ucde8\uc18c"}),(0,g.jsx)("button",{type:"submit",children:"\uc218\uc815"})]})]})]})})},y=c.ZP.div.withConfig({displayName:"MyQuizAnswerBlock__Container",componentId:"sc-1vg78xj-0"})(["display:flex;flex-direction:column;width:100%;"]),j=c.ZP.h2.withConfig({displayName:"MyQuizAnswerBlock__Title",componentId:"sc-1vg78xj-1"})(["font-weight:700;font-size:16px;line-height:19px;color:#111827;"]),z=c.ZP.div.withConfig({displayName:"MyQuizAnswerBlock__ContentBox",componentId:"sc-1vg78xj-2"})(["box-sizing:border-box;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:16px;gap:10px;width:100%;background:#ffffff;border:1px solid #e5e7eb;border-radius:8px;"]),v=c.ZP.form.withConfig({displayName:"MyQuizAnswerBlock__Form",componentId:"sc-1vg78xj-3"})(["display:flex;flex-direction:column;gap:32px;"]),_=c.ZP.div.withConfig({displayName:"MyQuizAnswerBlock__ColDiv",componentId:"sc-1vg78xj-4"})(["display:flex;flex-direction:column;gap:10px;"]),C=c.ZP.div.withConfig({displayName:"MyQuizAnswerBlock__RowDiv",componentId:"sc-1vg78xj-5"})(["display:flex;align-items:center;justify-content:space-between;button{font-size:14px;color:#8f8f8f;}"]),k=c.ZP.textarea.withConfig({displayName:"MyQuizAnswerBlock__InputBox",componentId:"sc-1vg78xj-6"})(["box-sizing:border-box;display:flex;align-items:flex-start;padding:16px;width:100%;background:#ffffff;border:1px solid #e5e7eb;border-radius:8px;font-weight:400;font-size:14px;line-height:21px;resize:none;&:focus{outline:none !important;border:1px solid #6366f1;}"]),q=c.ZP.div.withConfig({displayName:"MyQuizAnswerBlock__Buttons",componentId:"sc-1vg78xj-7"})(["display:flex;justify-content:flex-end;gap:4px;width:100%;button{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:10px 24px;gap:6px;width:72px;height:36px;border-radius:8px;font-weight:500;font-size:12px;line-height:16px;&:first-child{background:#ffffff;&:hover{background:#f9fafb;}}&:last-child{background:#4f46e5;color:#ffffff;&:hover{background:#4338ca;}}}"]),I=c.ZP.span.withConfig({displayName:"MyQuizAnswerBlock__ContentText",componentId:"sc-1vg78xj-8"})(["font-weight:500;font-size:14px;line-height:17px;color:#000000;"]),P=c.ZP.span.withConfig({displayName:"MyQuizAnswerBlock__AccentText",componentId:"sc-1vg78xj-9"})(["font-weight:700;font-size:14px;color:#4f46e5;"]),N=c.ZP.div.withConfig({displayName:"MyQuizAnswerBlock__RubricBlock",componentId:"sc-1vg78xj-10"})(["display:flex;gap:8px;width:100%;margin:8px 0px;input{display:flex;align-items:flex-start;padding:16px;background:#ffffff;border:1px solid #e5e7eb;border-radius:8px;font-weight:400;font-size:14px;line-height:17px;&:focus{outline:none !important;border:1px solid #6366f1;}&:first-child{width:90%;}&:last-child{width:5%;}}button{display:flex;align-items:center;padding:0px 4px;width:5%;font-size:26px;}"]),Z=i(2471);var B=function(n){var e=n.quizId,i=(0,h.BB)({quizId:e}).data;return(0,g.jsxs)(M,{children:[(0,g.jsx)(A,{children:"\ubb38\uc81c"}),(0,g.jsxs)(O,{children:[(null===i||void 0===i?void 0:i.quizContent)&&(0,g.jsx)(Z.Z,{contents:i.quizContent}),(0,g.jsx)("br",{}),null===i||void 0===i?void 0:i.quizFiles.map((function(n){return(0,g.jsx)("img",{src:n.qfPath,width:720},n.id)}))]})]})},M=c.ZP.div.withConfig({displayName:"MyQuizContentBlock__Container",componentId:"sc-lxhubn-0"})(["display:flex;flex-direction:column;gap:12px;"]),A=c.ZP.h2.withConfig({displayName:"MyQuizContentBlock__Title",componentId:"sc-lxhubn-1"})(["font-weight:700;font-size:16px;line-height:19px;color:#111827;"]),O=c.ZP.p.withConfig({displayName:"MyQuizContentBlock__ContentBox",componentId:"sc-lxhubn-2"})(["display:block;font-weight:400;font-size:14px;line-height:24px;color:#111827;"]),Q=i(5448);var E,S=function(n){var e=n.challengeId,i=n.quizId;return(0,g.jsxs)(D,{children:[(0,g.jsx)(R,{children:(0,g.jsx)(Q.Z,{challengeId:e,quizId:i})}),(0,g.jsx)(F,{}),(0,g.jsx)(B,{quizId:i}),(0,g.jsx)(T,{}),(0,g.jsx)(m,{quizId:i})]})},D=c.ZP.div.withConfig({displayName:"MyQuizContentContainer__Container",componentId:"sc-14cw22b-0"})(["display:flex;flex-direction:column;align-items:flex-start;padding:24px 36px;gap:32px;width:100%;background:#ffffff;border:1px solid #f3f4f6;border-radius:8px;"]),R=c.ZP.div.withConfig({displayName:"MyQuizContentContainer__ColDiv",componentId:"sc-14cw22b-1"})(["display:flex;flex-direction:column;gap:16px;width:100%;"]),F=c.ZP.hr.withConfig({displayName:"MyQuizContentContainer__Horizontal",componentId:"sc-14cw22b-2"})(["width:648px;height:0px;border:0.5px solid #e5e7eb;"]),T=(0,c.ZP)(F).withConfig({displayName:"MyQuizContentContainer__DashedHorizontal",componentId:"sc-14cw22b-3"})(["border:0.5px dashed #e5e7eb;"]),H=i(4627),J=i(9870),V=i(719);var X=function(){var n=(0,o.useRouter)(),e=String(n.query.cid),i=String(n.query.qid);return(0,g.jsx)(Y,{children:(0,g.jsxs)(G,{children:[(0,g.jsx)(S,{challengeId:e,quizId:i}),(0,g.jsx)(J.Z,{challengeId:e,quizId:i,page:"MY"}),(0,g.jsx)(H.Z,{quizId:i})]})})},Y=c.ZP.div.withConfig({displayName:"my__Background",componentId:"sc-1dkg913-0"})(["background-color:#f8fafc;"]),G=c.ZP.div.withConfig({displayName:"my__Frame",componentId:"sc-1dkg913-1"})(["box-sizing:border-box;display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center;padding:80px 0px;width:720px;margin:0 auto;background-color:#f8fafc;",""],V.B.medium(E||(E=(0,t.Z)(["\n    width: 100%;\n    padding: 88px 12px;\n  "]))))},9601:function(n,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/challenges/[cid]/quizzes/[qid]/my",function(){return i(5383)}])}},function(n){n.O(0,[390,185,265,597,774,888,179],(function(){return e=9601,n(n.s=e);var e}));var e=n.O();_N_E=e}]);