(()=>{self.importScripts("lib/idb.js"),self.importScripts("https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js");const t="store",e=idb.openDB("api-store",1,{upgrade(e){e.objectStoreNames.contains(t)||e.createObjectStore(t,{keyPath:"id"})}});self.addEventListener("fetch",(r=>{const n="https://dev.kkamjidot.com",o=null==r?void 0:r.request;let i;if("GET"===(null==o?void 0:o.method)&&String(o.url).includes(n)){const s=String(o.url).split(n)[1].slice(3),l=CryptoJS.SHA256(s).toString();if(null==r||!r.request)return;i=fetch(null==r?void 0:r.request).then((r=>(r.clone().json().then((r=>{e.then((e=>{const o=e.transaction(t,"readwrite"),i=o.objectStore(t),s=CryptoJS.AES.encrypt(JSON.stringify(r),n).toString();return i.put({id:l,value:s}),o}))})),r)))}i&&(null==r||r.respondWith(i))}))})();